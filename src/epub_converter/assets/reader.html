<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="public, max-age=31536000">
    <meta name="robots" content="index, follow">
    <title>{{ title }}</title>

    <meta name="description"
        content="{% if metadata.get('description') and metadata.get('description') != 'None' %}{{ metadata.get('description') }}{% else %}Read {{ title }} online. A digital book reader with optimized viewing experience.{% endif %}">
    <meta name="author" content="{{ metadata.get('author', 'Unknown') }}">
    <meta name="keywords"
        content="{{ title }}, epub, digital book, reader{% if metadata.get('subject') %}, {{ metadata.get('subject')|join(', ') }}{% endif %}">
    {% if metadata.get('publisher') %}
    <meta name="publisher" content="{{ metadata.get('publisher') }}">{% endif %}
    {% if metadata.get('date') %}
    <meta name="date" content="{{ metadata.get('date') }}">{% endif %}
    {% if metadata.get('language') %}
    <meta name="language" content="{{ metadata.get('language') }}">{% endif %}
    <meta property="og:title" content="{{ title }}">
    <meta property="og:type" content="book">
    {% if metadata.get('author') %}
    <meta property="og:author" content="{{ metadata.get('author') }}">{% endif %}
    <meta property="og:description" content="{{ metadata.get('description', 'Read ' + title + ' online.') }}">

    <!-- Preload critical resources for better performance -->
    <link rel="preload" href="/static/style.css" as="style" crossorigin="anonymous" fetchpriority="high">
    {% if metadata.get('cover_image_url') %}
    <link rel="preload" href="{{ metadata.get('cover_image_url') }}" as="image" fetchpriority="high">
    {% endif %}

    <link rel="stylesheet" href="/static/style.css" crossorigin="anonymous">
    <script src="/static/script.js" crossorigin="anonymous" defer></script>

    <script id="app-data" type="application/json">
        {{ metadata_json }}
    </script>
</head>

<body class="">
    <h1 id="series-title" class="series-title">{{ title }}</h1>
    <div id="app-container">
        <div id="content-wrapper">
            <main id="main-content" tabindex="0">
                <div class="content-body text-base">
                    {{ body_content }}
                </div>
            </main>
            <header id="topbar-container"></header>
        </div>
    </div>
</body>

</html>